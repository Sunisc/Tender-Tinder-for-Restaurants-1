(this.webpackJsonp426finalproj=this.webpackJsonp426finalproj||[]).push([[0],{36:function(e,t,a){e.exports=a(68)},41:function(e,t,a){},43:function(e,t,a){},61:function(e,t,a){},68:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(31),l=a.n(s),o=(a(41),a(10)),i=a.n(o),c=a(2),u=a(3),m=a(5),h=a(4),p=a(6),d=a(33),g=a(14),f=a(17),b=a(32),E=(a(43),a(1)),v=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).updateSearch=function(e){e.preventDefault(),a.setState(Object(f.a)({},e.target.name,e.target.value))},a.submit=function(e){void 0!==e&&e.preventDefault(),navigator.geolocation.getCurrentPosition((function(e){a.setState({latitude:e.coords.latitude,longitude:e.coords.longitude})}));var t=a.state,n=t.latitude,r=t.longitude,s=t.categories,l=t.radius,o=t.term,i=t.offset,c=t.limit;a.props.getTargets(n,r,s,l,o,i,c)},a.handleRadius=function(e){e.preventDefault();var t=1609.344*e.target.value;t>4e4&&(t=4e4),a.setState({radius:Math.floor(t)})},a.state={latitude:"",longitude:"",categories:"",radius:"",term:"",offset:"",limit:"",isActive:!1,renderHasRun:!1,runTotal:0,autocomplete:[]},navigator.geolocation.getCurrentPosition((function(e){a.setState({latitude:e.coords.latitude,longitude:e.coords.longitude})})),a.yelpAutocompleteDebounced=Object(b.a)(50,a.yelpAutocomplete),a.suggestions=[],a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"changeActive",value:function(){this.setState({isActive:!this.state.isActive})}},{key:"yelpAutocomplete",value:function(){var e,t=this;return i.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:"VxGmGdflQDo8ChLJQaQ4gQFBsJ_2qpGd74Xmvo72DGyAGLayLv20T6Q8snm2SIH_Q5dQ-8YQnLIfnomJQzxroI0TqR2mu6b2mF-Mo4en1WbdJgBv9Q01iHbDWpDyXXYx",e="https://cors-anywhere.herokuapp.com/https://api.yelp.com/v3/autocomplete?",e+="text=".concat(this.state.term,"&latitude=").concat(this.state.latitude,"&longitude=").concat(this.state.longitude),fetch("".concat(e),{headers:{Authorization:"Bearer VxGmGdflQDo8ChLJQaQ4gQFBsJ_2qpGd74Xmvo72DGyAGLayLv20T6Q8snm2SIH_Q5dQ-8YQnLIfnomJQzxroI0TqR2mu6b2mF-Mo4en1WbdJgBv9Q01iHbDWpDyXXYx"}}).then((function(e){return e.json()})).then((function(e){var a=[];if(void 0!==e&&void 0!==e.terms&&e.terms.length>0)for(var n=0;n<e.terms.length;n++)a.push(e.terms[n].text);t.suggestions=a}));case 4:case"end":return a.stop()}}),null,this)}},{key:"onTextChanged",value:function(){""!==this.state.term&&this.yelpAutocompleteDebounced()}},{key:"renderSuggestions",value:function(){var e=this;return 0===this.suggestions.length?null:r.a.createElement("ul",null,this.suggestions.map((function(t){return r.a.createElement("li",{key:t,onClick:function(){e.suggestionSelect(t),e.suggestions=[]}},t)})))}},{key:"suggestionSelect",value:function(e){this.setState({term:e})}},{key:"render",value:function(){var e=this;return this.state.renderHasRun||""===this.state.longitude||""===this.state.latitude||(this.submit(),this.setState({renderHasRun:!0})),r.a.createElement(E.Container,null,r.a.createElement(E.Button,{onClick:this.changeActive.bind(this)},"Choose your filter!"),r.a.createElement("form",{onSubmit:this.submit},r.a.createElement(E.Modal,{isActive:this.state.isActive},r.a.createElement(E.ModalBackground,null),r.a.createElement(E.ModalCard,null,r.a.createElement(E.ModalCardHeader,null,r.a.createElement(E.ModalCardTitle,null,"Filters!")),r.a.createElement(E.ModalCardBody,null,r.a.createElement(E.Panel,null,r.a.createElement(E.PanelBlock,null,r.a.createElement(E.Label,null,"Search Term"),"\xa0 \xa0",r.a.createElement(E.Control,{className:"autocomplete"},r.a.createElement(E.Input,{name:"term",type:"text",placeholder:"Enter restaurant",value:this.state.term,onChange:function(t){e.updateSearch(t),e.onTextChanged()}}),this.renderSuggestions())),r.a.createElement(E.PanelBlock,null,r.a.createElement(E.Label,null,"Category"),"\xa0 \xa0 \xa0",r.a.createElement(E.Control,null,r.a.createElement(E.Input,{name:"categories",type:"text",placeholder:"Enter Categories",value:this.state.categories,onChange:this.updateSearch}))),r.a.createElement(E.PanelBlock,null,r.a.createElement(E.Label,null,"Search Radius"),r.a.createElement(E.Control,null,r.a.createElement(E.Input,{name:"radius",type:"text",placeholder:"Radius in miles",onChange:this.handleRadius}))))),r.a.createElement(E.ModalCardFooter,null,r.a.createElement(E.Button,{isColor:"primary",type:"submit",onClick:this.changeActive.bind(this)},"Search"),r.a.createElement(E.Button,{isColor:"warning",onClick:this.changeActive.bind(this)},"Cancel"))))))}}]),t}(n.Component),C=function(e){function t(e){return Object(c.a)(this,t),Object(m.a)(this,Object(h.a)(t).call(this,e))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=null,t=null;null!=this.props.loggedIn&&(t=r.a.createElement(E.NavbarItem,{href:"reviews"},"Reviews"),e=r.a.createElement(E.NavbarItem,{onClick:this.props.handleSettings,href:"#"},this.props.loggedIn,"'s Account Settings"));var a=r.a.createElement(E.NavbarItem,{href:"/"},"Welcome"),n=r.a.createElement(E.NavbarItem,{onClick:this.props.loginPopup,href:"#"},"Login");return null!=this.props.loggedIn&&(n=r.a.createElement(E.NavbarItem,{onClick:this.props.handleLogout,href:"#"},"Logout")),r.a.createElement(E.Hero,{isColor:"info",isSize:"1/4"},r.a.createElement(E.HeroBody,null,r.a.createElement(E.Container,{hasTextAlign:"left"},r.a.createElement(E.Title,null,"Tender: Tinder Restaurant Edition"))),r.a.createElement(E.HeroFooter,null,r.a.createElement(E.Navbar,{style:{marginLeft:"14%",marginRight:"14%"}},r.a.createElement(E.NavbarMenu,{isActive:"true"},r.a.createElement(E.NavbarStart,null,a,r.a.createElement(E.NavbarItem,{href:"search"},"Search")),r.a.createElement(E.NavbarEnd,null,t,e,n)))))}}]),t}(r.a.Component),y=a(8),S=a.n(y),k=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(m.a)(this,Object(h.a)(t).call(this))).updateCred=function(t){t.preventDefault(),"username"===t.target.getAttribute("name")?e.setState({usernameBox:t.target.value}):"password"===t.target.getAttribute("name")&&e.setState({passBox:t.target.value})},e.updateMode=function(t){t.preventDefault(),"Sign Up"===t.target.getAttribute("status")?(e.setState({modeButton:"Log In",switchModeText:"Already have an account?",textInfo:"Sign Up",isSignUp:!0}),e.setState({errorMessage:""})):"Log In"===t.target.getAttribute("status")&&(e.setState({modeButton:"Sign Up",switchModeText:"Don't have an account?",textInfo:"Log In",isSignUp:!1}),e.setState({errorMessage:""}))},e.submitHandler=function(t){var a;return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.preventDefault(),"Sign Up"!==t.target.getAttribute("status")){n.next=17;break}return n.prev=2,n.next=5,i.a.awrap(S()({method:"post",url:"http://localhost:3000/account/create",data:{name:e.state.usernameBox,pass:e.state.passBox}}));case 5:n.sent,e.setState({modeButton:"Sign Up",switchModeText:"Don't have an account?",textInfo:"Log In",isSignUp:!1}),e.setState({errorMessage:"Thanks for signing up, you may now log in!"}),e.props.incrementUsersStat(e.state.usernameBox),n.next=15;break;case 11:n.prev=11,n.t0=n.catch(2),console.log(n.t0),e.setState({errorMessage:"Account already exists with that name!"});case 15:n.next=34;break;case 17:if("Log In"!==t.target.getAttribute("status")){n.next=34;break}return n.prev=18,n.next=21,i.a.awrap(S()({method:"post",url:"http://localhost:3000/account/login",data:{name:e.state.usernameBox,pass:e.state.passBox}}));case 21:a=n.sent,e.props.setStateApp({loggedIn:e.state.usernameBox}),localStorage.setItem("loggedIn",e.state.usernameBox),setTimeout(e.props.closePopup,1e3),localStorage.setItem("jwt",a.data.jwt),e.setState({errorMessage:""}),e.props.retrieveUserData(),n.next=34;break;case 30:n.prev=30,n.t1=n.catch(18),console.log(n.t1),e.setState({errorMessage:"The username and password you entered did not match our records. Please double-check and try again."});case 34:case"end":return n.stop()}}),null,null,[[2,11],[18,30]])},e.state={showPopup:!1,isSignUp:!1,textInfo:"Log In",usernameBox:"",passBox:"",switchModeText:"Don't have an account?",modeButton:"Sign Up",errorMessage:""},e}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return null!=this.props.loggedIn?r.a.createElement("div",{className:"popup"},r.a.createElement("div",{className:"popup_inner"},r.a.createElement("br",null),r.a.createElement("h1",{class:"title"},"Log In Successful!"))):r.a.createElement("div",{className:"popup"},r.a.createElement("div",{className:"popup_inner"},r.a.createElement("br",null),r.a.createElement("h1",{class:"title"},this.state.textInfo,":"),r.a.createElement(E.Box,null,r.a.createElement(E.Container,null,r.a.createElement("form",{status:this.state.textInfo,onSubmit:this.submitHandler},r.a.createElement(E.Field,{isHorizontal:!0},r.a.createElement(E.Label,{isSize:"large"},"Username:"),"\xa0 \xa0",r.a.createElement(E.Control,null,r.a.createElement(E.Input,{name:"username",type:"text",placeholder:"Username",onChange:this.updateCred}))),r.a.createElement(E.Field,{isHorizontal:!0},r.a.createElement(E.Label,{isSize:"large"},"Password:"),"\xa0 \xa0 \xa0",r.a.createElement(E.Control,null,r.a.createElement(E.Input,{name:"password",type:"password",placeholder:"Password",onChange:this.updateCred}))),r.a.createElement(E.Field,{isGrouped:!0},r.a.createElement(E.Control,null,r.a.createElement(E.Button,{isSize:"large",isColor:"primary",type:"submit",status:this.state.textInfo,username:this.state.usernameBox,password:this.state.passBox,onClick:this.props.handleUserDone},this.state.textInfo)),r.a.createElement(E.Control,null,r.a.createElement(E.Button,{isSize:"large",isColor:"primary",type:"button",isLink:!0,onClick:this.props.closePopup},"Cancel")),r.a.createElement(E.Label,{isColor:"red"},this.state.errorMessage)))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(E.Container,null,r.a.createElement("h2",{class:"subtitle"},this.state.switchModeText),r.a.createElement(E.Field,null,r.a.createElement(E.Control,{isAlign:"center"},r.a.createElement(E.Button,{isSize:"large",isColor:"primary",status:this.state.modeButton,onClick:this.updateMode},this.state.modeButton)))))))}}]),t}(n.Component),x=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(E.Container,null,r.a.createElement(E.Box,null,r.a.createElement(E.Field,{isGrouped:!0},r.a.createElement(E.FieldLabel,null,r.a.createElement(E.Label,null,this.props.restaurant.name,", ",this.props.restaurant.location.display_address.join(" "))),r.a.createElement(E.FieldBody,null,r.a.createElement(E.Button,{id:this.props.restaurant.id,onClick:this.props.onDelete},"DELETE")))))}}]),t}(n.Component),I=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return"none"===this.props.blacklist||void 0===this.props.blacklist||null===this.props.blacklist?null:0===this.props.blacklist.length?r.a.createElement(E.Container,null,r.a.createElement(E.Label,null,"No Restaurants on Blacklist")):r.a.createElement(E.Column,{isSize:"1/2"},this.props.blacklist.map((function(t){return r.a.createElement(x,{restaurant:t,onDelete:e.props.onDelete})})))}}]),t}(n.Component),w=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(m.a)(this,Object(h.a)(t).call(this))).state={showPopup:!1},e}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"settingspopup"},r.a.createElement("div",{style:{padding:"15px"},className:"settingspopup_inner"},r.a.createElement("br",null),r.a.createElement("h1",{class:"title"},this.props.loggedIn,"'s Settings:"),r.a.createElement(E.Box,null,r.a.createElement("h2",{class:"subtitle"},"Disliked Restaurants:"),r.a.createElement(E.Field,null,r.a.createElement(I,{blacklist:this.props.blacklist,onDelete:this.props.onDelete}))),r.a.createElement("br",null),r.a.createElement(E.Box,null,r.a.createElement(E.Field,{isGrouped:!0},r.a.createElement(E.Control,null,r.a.createElement(E.Button,{isSize:"large",isColor:"primary",onClick:this.props.saveSettings},"Save")),r.a.createElement(E.Control,null,r.a.createElement(E.Button,{isSize:"large",isColor:"primary",type:"submit",isLink:!0,onClick:this.props.closeSettings},"Cancel"))))))}}]),t}(n.Component),B=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={name:"",imageURL:"",phone:"",address:"",distance:"",category:"",price:"",rating:""},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t="https://www.google.com/maps/place/".concat(this.props.address.split(" ").join("+"));return null!==this.props.loggedIn?r.a.createElement(E.Card,null,r.a.createElement(E.CardImage,null,r.a.createElement(E.Image,{src:this.props.imageURL})),r.a.createElement(E.CardContent,null,r.a.createElement(E.Media,null,r.a.createElement(E.MediaContent,null,r.a.createElement(E.Title,{hasTextAlign:!0,isSize:4},this.props.name))),r.a.createElement(E.Content,null,this.props.rating,r.a.createElement(E.Icon,{className:"fas fa-star"})," - ",this.props.price," -"," ",this.props.category,r.a.createElement("br",null),this.props.distance.toFixed(2)," mi. - ",this.props.address)),r.a.createElement(E.Box,null,r.a.createElement(E.Columns,{isCentered:!0},r.a.createElement(E.Column,{isSize:"1/3"},r.a.createElement(E.Button,{isColor:"danger",isFullWidth:!0,onClick:function(){e.props.updateIndex(e.props.newResults),null!==e.props.loggedIn&&e.props.blacklist(e.props.result)}},r.a.createElement(E.Icon,{isAlign:"left",className:"fas fa-times"}),r.a.createElement("span",null,"I don't like this"))),r.a.createElement(E.Column,{isSize:"1/3"},r.a.createElement(E.Button,{isColor:"info",isFullWidth:!0,href:t,target:"_blank",rel:"noopener noreferrer"},r.a.createElement(E.Icon,{className:"far fa-star"}),r.a.createElement("span",null,"Show me this!"))),r.a.createElement(E.Column,{isSize:"1/3"},r.a.createElement(E.Button,{isColor:"primary",isFullWidth:!0,onClick:function(){e.props.updateIndex(e.props.newResults)}},r.a.createElement(E.Icon,{isAlign:"right",className:"far fa-heart"}),r.a.createElement("span",null,"Save for Later")))))):r.a.createElement(E.Card,null,r.a.createElement(E.CardImage,null,r.a.createElement(E.Image,{src:this.props.imageURL})),r.a.createElement(E.CardContent,null,r.a.createElement(E.Media,null,r.a.createElement(E.MediaContent,null,r.a.createElement(E.Title,{hasTextAlign:!0,isSize:4},this.props.name))),r.a.createElement(E.Content,null,this.props.rating,r.a.createElement(E.Icon,{className:"fas fa-star"})," - ",this.props.price," -"," ",this.props.category,r.a.createElement("br",null),this.props.distance.toFixed(2)," mi. - ",this.props.address)),r.a.createElement(E.Box,null,r.a.createElement(E.Columns,{isCentered:!0},r.a.createElement(E.Column,{isSize:"1/3"},r.a.createElement(E.Button,{isColor:"info",isFullWidth:!0,href:t,target:"_blank",rel:"noopener noreferrer"},r.a.createElement(E.Icon,{className:"far fa-star"}),r.a.createElement("span",null,"Show me this!"))),r.a.createElement(E.Column,{isSize:"1/3"},r.a.createElement(E.Button,{isColor:"primary",isFullWidth:!0,onClick:function(){e.props.updateIndex(e.props.newResults)}},r.a.createElement("span",null,"Next"),r.a.createElement(E.Icon,{isAlign:"primary",className:"fas fa-arrow-right"}))))))}}]),t}(n.Component),j=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={restaurantName:"",index:0,outOfResults:!1},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"updateIndex",value:function(e){this.state.index===e.length-1&&this.setState({outOfResults:!0}),this.setState({index:this.state.index+1}),this.render()}},{key:"render",value:function(){if(1==this.state.outOfResults)return r.a.createElement(E.Column,{isSize:"1/2"},r.a.createElement("h1",{className:"title"},"Uh Oh! You have reached your swipe limit for today! If you are really that hungry, refresh and change your filters. Don't be a picky eater next time"));if(void 0!==this.props.results){var e=this.props.results.filter(this.props.checkBlacklist),t=e[this.state.index];return 0==e.length||void 0==t?(this.state.outOfResults=!0,r.a.createElement(E.Column,{isSize:"1/2"},r.a.createElement("h1",{className:"title"},"Uh Oh! You have reached your swipe limit for today! If you are really that hungry, refresh and change your filters. Don't be a picky eater next time"))):r.a.createElement(E.Column,{isSize:"1/2"},r.a.createElement(B,{result:t,name:t.name,imageURL:t.image_url,phone:t.phone,address:t.location.display_address.join(" "),distance:t.distance/1609.344,category:t.categories[0].title,price:t.price,rating:t.rating,updateIndex:this.updateIndex.bind(this),blacklist:this.props.blacklist,loggedIn:this.props.loggedIn,newResults:e}),r.a.createElement("br",null))}return null}}]),t}(n.Component),O=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(m.a)(this,Object(h.a)(t).call(this))).updateReview=function(t){t.preventDefault(),e.setState(Object(f.a)({},t.target.name,t.target.value))},e.submit=function(t){t.preventDefault(),e.uploadPost(),window.location.reload()},e.state={review:"",username:"tenderboys"},e}return Object(p.a)(t,e),Object(u.a)(t,[{key:"uploadPost",value:function(){var e=localStorage.getItem("jwt");new S.a.create({baseURL:"http://localhost:3000/private",headers:{Authorization:"Bearer ".concat(e)}}).post("/reviews/",{data:{review:this.state.review,username:this.props.username},headers:{Authorization:"Bearer ".concat(e)},type:"merge"}).then((function(e){})).catch((function(e){}))}},{key:"render",value:function(){return r.a.createElement(E.Box,null,r.a.createElement("form",{onSubmit:this.submit},r.a.createElement(E.Field,null,r.a.createElement(E.Title,{isSize:3},"Help others out by giving them suggestions!"),r.a.createElement(E.Control,null,r.a.createElement(E.Input,{class:"is-rounded",name:"review",type:"text",placeholder:"Post Your Review Here",onChange:this.updateReview})),r.a.createElement("br",null),r.a.createElement(E.Control,null,r.a.createElement(E.Button,{isColor:"link",type:"submit",isHovered:"true",ali:"centered"},"Post!")))))}}]),t}(n.Component),T=function(e){function t(){var e;Object(c.a)(this,t),e=Object(m.a)(this,Object(h.a)(t).call(this));new S.a.create({baseURL:"http://localhost:3000/public"});return e.data="",e.state={review:"",username:"",events:"ffefe",comb:[],reload:0},e}return Object(p.a)(t,e),Object(u.a)(t,[{key:"getData",value:function(){var e=this,t=localStorage.getItem("jwt"),a=new S.a.create({baseURL:"http://localhost:3000/private"}),n=this.state.comb;a.get("/reviews",{headers:{Authorization:"Bearer ".concat(t)}}).then((function(t){for(var a=0;a<t.data.result.length;a++)n.push({review:t.data.result[a].review,user:t.data.result[a].username});e.updateBoxes(n).bind(e)})).catch((function(e){}))}},{key:"updateBoxes",value:function(e){this.setState({comb:e})}},{key:"render",value:function(){return this.state.reload<1&&(this.getData(),this.setState({reload:1})),0===this.state.comb.length?r.a.createElement(E.Box,null,r.a.createElement(E.Title,null,"No Restaurant Suggestions Have Yet Been Uploaded. Be the first to Suggest!")):r.a.createElement(E.Column,{hasTextAlign:"centered",isSize:"1",color:"primary"},this.state.comb.slice(0).reverse().map((function(e){return r.a.createElement(E.Card,{color:"primary"},r.a.createElement(E.CardContent,null,r.a.createElement(E.Media,null,r.a.createElement(E.MediaContent,null,r.a.createElement(E.Title,{hasTextAlign:!0,isSize:3},"@"+e.user+" says:"))),r.a.createElement(E.Content,null,r.a.createElement(E.Title,{isSize:5,hasTextAlign:"left"},e.review))))})))}}]),t}(n.Component),D=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(m.a)(this,Object(h.a)(t).call(this))).state={comb:[],login:""},e.getData(),e}return Object(p.a)(t,e),Object(u.a)(t,[{key:"getData",value:function(){var e=this,t=new S.a.create({baseURL:"http://localhost:3000/public"}),a=this.state.comb;t.get("/users").then((function(t){a.push(t.data.result.length),e.updateBoxes(a)})).catch((function(e){}))}},{key:"updateBoxes",value:function(e){this.setState({comb:e})}},{key:"render",value:function(){return 0===this.state.comb[0]?r.a.createElement(E.Box,null,r.a.createElement(E.Title,null,"We currently have ",this.state.comb[0]," hungry people like you using our site. Be the first to get top insight to best local foods"),r.a.createElement("h1",null,"Sign up to be the First User on the Site!")):r.a.createElement(E.Box,null,r.a.createElement(E.Title,null,"Welcome to Tender"),r.a.createElement("h4",null,"Join the more than ",this.state.comb[0]," users currently finding great food on our site!"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("p",null,"From the producers of TINDER (jk), comes the new restaurants matching app. Get Paired with the best local restaurants with a click of a button. Use the search tab to start looking for restaurants near your location. Make sure to turn on location services for a pleasurable experience."),r.a.createElement("br",null),r.a.createElement("p",null,"Logging in will give you additional features, like reviewing and more! So sign-up now!"," "))}}]),t}(n.Component),A=(a(61),a(62)),L="VxGmGdflQDo8ChLJQaQ4gQFBsJ_2qpGd74Xmvo72DGyAGLayLv20T6Q8snm2SIH_Q5dQ-8YQnLIfnomJQzxroI0TqR2mu6b2mF-Mo4en1WbdJgBv9Q01iHbDWpDyXXYx",U=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(m.a)(this,Object(h.a)(t).call(this))).getTargets=function(t,a,n,r,s,l,o){var i="https://api.yelp.com/v3/businesses/search?",c=void 0===n||""===n,u=void 0===r||""===r,m=void 0===s||""===s,h=void 0===l||""===l,p=void 0===o||""===o;(void 0===t||""===t)&&(void 0===a||""===a)&&c&&u&&m&&h&&p?i="":(i+="latitude=".concat(t,"&longitude=").concat(a),i+=c?"&categories=restaurants":"&categories=restaurants,".concat(n),u||(i+="&radius=".concat(r)),m||(i+="&term=".concat(s)),h||(i+="&offset=".concat(l)),i+=p?"&limit=50":"&limit=".concat(o)),A("https://cors-anywhere.herokuapp.com/".concat(i),{headers:{Authorization:"Bearer ".concat(L)},"Content-Type":"application/json",Accept:"application/json"}).then((function(e){return e.json()})).then((function(i){e.setState({results:i,latitude:t,longitude:a,categories:n,radius:r,term:s,offset:l,limit:o})})).catch((function(){e.setState({results:"none",latitude:t,longitude:a,categories:n,radius:r,term:s,offset:l,limit:o})}))},"null"===localStorage.getItem("loggedIn")?e.state={showPopup:!1,loggedIn:null,blacklist:null,results:"none",latitude:"",longitude:"",categories:"",radius:"",term:"",offset:0,limit:"",hasrun:!1}:e.state={showPopup:!1,loggedIn:localStorage.getItem("loggedIn"),blacklist:null,results:"none",latitude:"",longitude:"",categories:"",radius:"",term:"",offset:0,limit:"",hasrun:!1},navigator.geolocation.getCurrentPosition((function(t){e.setState({latitude:t.coords.latitude,longitude:t.coords.longitude})})),e}return Object(p.a)(t,e),Object(u.a)(t,[{key:"togglePopup",value:function(){this.setState({showPopup:!this.state.showPopup})}},{key:"handleLogout",value:function(){this.setState({loggedIn:null}),localStorage.setItem("loggedIn",null),localStorage.setItem("jwt",null),window.location.reload()}},{key:"retrieveUserData",value:function(){var e,t;return i.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e=localStorage.getItem("jwt"),a.prev=1,a.next=4,i.a.awrap(S()({method:"get",url:"http://localhost:3000/user/blacklist",headers:{Authorization:"Bearer ".concat(e)}}));case 4:t=a.sent,this.setBlacklist(t.data.result),a.next=14;break;case 8:return a.prev=8,a.t0=a.catch(1),a.next=12,i.a.awrap(S()({method:"post",url:"http://localhost:3000/user/blacklist",headers:{Authorization:"Bearer ".concat(e)},data:{data:[]}}));case 12:a.sent,this.setBlacklist([]);case 14:case"end":return a.stop()}}),null,this,[[1,8]])}},{key:"setBlacklist",value:function(e){this.setState({blacklist:e})}},{key:"updateBlacklist",value:function(){var e;return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e=localStorage.getItem("jwt"),t.next=3,i.a.awrap(S()({method:"post",url:"http://localhost:3000/user/blacklist",headers:{Authorization:"Bearer ".concat(e)},data:{data:this.state.blacklist}}));case 3:t.sent;case 4:case"end":return t.stop()}}),null,this)}},{key:"toggleSettings",value:function(){this.setState({showSettings:!this.state.showSettings})}},{key:"handleSettings",value:function(e){this.toggleSettings()}},{key:"handleUserDone",value:function(e){}},{key:"deleteBlacklistItem",value:function(e){var t=e.target.getAttribute("id");console.log(t);var a=null,n=this.state.blacklist;for(var r in n)n[r].id===t&&(a=r);n.splice(a,1),this.setBlacklist(n)}},{key:"addToBlacklist",value:function(e){var t=this.state.blacklist;t.push(e),this.setState({blacklist:t}),this.updateBlacklist()}},{key:"saveSettings",value:function(){this.updateBlacklist(),this.toggleSettings()}},{key:"cancelSettings",value:function(){this.retrieveUserData(),this.toggleSettings()}},{key:"checkBlacklist",value:function(e){for(var t in this.state.blacklist)if(this.state.blacklist[t].id===e.id)return!1;return!0}},{key:"incrementUsersStat",value:function(e){return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:new S.a.create({baseURL:"http://localhost:3000/public"}).post("/users/",{data:{user:e},type:"merge"});case 2:case"end":return t.stop()}}))}},{key:"render",value:function(){var e=this;return this.state.hasrun||(null!==this.state.loggedIn&&this.retrieveUserData(),this.setState({hasrun:!0})),r.a.createElement(d.a,{basename:""},r.a.createElement("div",{className:"App"},r.a.createElement(C,{loggedIn:this.state.loggedIn,handleSettings:this.handleSettings.bind(this),loginPopup:this.togglePopup.bind(this),handleLogout:this.handleLogout.bind(this)}),r.a.createElement("br",null),r.a.createElement(g.a,{path:"/",exact:!0,strict:!0,render:function(t){return r.a.createElement("div",null,r.a.createElement(E.Container,null,r.a.createElement(D,Object.assign({getTargets:e.getTargets,username:e.state.loggedIn},t)),r.a.createElement(E.Columns,{isCentered:!0})),r.a.createElement("br",null))}}),r.a.createElement(g.a,{path:"/search",strict:!0,render:function(t){return r.a.createElement(E.Container,null,r.a.createElement(v,Object.assign({getTargets:e.getTargets},t)),r.a.createElement("br",null),r.a.createElement(E.Columns,{isCentered:!0},r.a.createElement(j,Object.assign({results:e.state.results.businesses,checkBlacklist:e.checkBlacklist.bind(e),blacklist:e.addToBlacklist.bind(e),loggedIn:e.state.loggedIn},t))))}}),r.a.createElement(g.a,{path:"/reviews",strict:!0,render:function(t){return r.a.createElement(E.Container,null,r.a.createElement(O,Object.assign({getTargets:e.getTargets,username:e.state.loggedIn},t)),r.a.createElement(T,Object.assign({getTargets:e.getTargets},t)),r.a.createElement(E.Columns,{isCentered:!0}))}}),r.a.createElement(E.Footer,{id:"footer"},r.a.createElement(E.Container,null,r.a.createElement(E.Content,null,r.a.createElement(E.Columns,null,r.a.createElement(E.Column,{isFull:!0},r.a.createElement("p",null,"Made with",r.a.createElement(E.Icon,{hasTextColor:"danger",className:"fa fa-heart"}),"by Tenderizers"),r.a.createElement("br",null),r.a.createElement("p",null,"Stay Hungry My Friends")))))),r.a.createElement("div",{id:"loginPopup"},this.state.showPopup?r.a.createElement(k,{loggedIn:this.state.loggedIn,closePopup:this.togglePopup.bind(this),handleUserDone:this.handleUserDone.bind(this),setStateApp:this.setState.bind(this),retrieveUserData:this.retrieveUserData.bind(this),incrementUsersStat:this.incrementUsersStat.bind(this)}):null),r.a.createElement("div",{id:"settingsPopup"},this.state.showSettings?r.a.createElement(w,{closeSettings:this.cancelSettings.bind(this),loggedIn:this.state.loggedIn,blacklist:this.state.blacklist,onDelete:this.deleteBlacklistItem.bind(this),saveSettings:this.saveSettings.bind(this)}):null)))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(U,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[36,1,2]]]);
//# sourceMappingURL=main.f752d93b.chunk.js.map